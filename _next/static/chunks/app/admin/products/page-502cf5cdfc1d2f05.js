(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[122],{989:function(e,t,s){Promise.resolve().then(s.bind(s,7796))},3963:function(e,t){"use strict";function s(){return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s}}),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7796:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return h}});var l=s(9073),a=s(3794),r=s(3963),i=s.n(r),n=s(1533),d=s(4600),c=s(424),o=s(619),x=s(7065),m=s(9619);let u=(0,x.eI)(m.NF,m.QK);function h(){let[e,t]=(0,a.useState)([]),[s,r]=(0,a.useState)(1),[x,m]=(0,a.useState)(0),[h,f]=(0,a.useState)(""),[p,g]=(0,a.useState)(""),[y,b]=(0,a.useState)(!1),[v,j]=(0,a.useState)(!1),N=Math.ceil(x/10),w=async(e,s)=>{b(!0);try{let l=u.from("products").select("*",{count:"exact"});s&&(l=l.ilike("code","%".concat(s,"%")));let{data:a,count:r,error:i}=await l.range((e-1)*10,10*e-1).order("created_at",{ascending:!1});if(i)throw i;t(a||[]),m(r||0)}catch(e){console.error("Error fetching products:",e)}finally{b(!1)}};(0,a.useEffect)(()=>{w(s,p)},[s,p]);let C=e=>{e>=1&&e<=N&&r(e)};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i(),{children:(0,l.jsx)("title",{children:"مدیریت محصولات | فروشگاه رضائی"})}),(0,l.jsxs)("div",{className:"py-2",children:[(0,l.jsx)("header",{}),(0,l.jsx)("main",{children:(0,l.jsxs)("div",{className:"mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8",children:[(0,l.jsxs)("div",{className:"px-4 sm:px-6 lg:px-8",children:[(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center",children:[(0,l.jsxs)("div",{className:"flex-auto",children:[(0,l.jsx)("h1",{className:"text-base font-semibold leading-6 text-gray-900",children:"لیست محصولات"}),(0,l.jsx)("p",{className:"mt-2 text-sm text-gray-700",children:"لیست محصولات تعریف شده در سیستم."})]}),(0,l.jsxs)("div",{className:"mt-4 flex gap-2 sm:mt-0",children:[(0,l.jsx)(n.default,{href:"/admin/products/add",type:"button",className:"block w-full rounded-md bg-indigo-600 px-3 py-2 text-center text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:"افزودن محصول جدید"}),(0,l.jsxs)("button",{type:"button",className:"flex items-center rounded-md bg-gray-600 px-3 py-2 text-center text-sm font-semibold text-white shadow-sm hover:bg-gray-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-gray-600",onClick:()=>j(e=>!e),children:[(0,l.jsx)(d.Z,{className:"h-5 w-5 ml-1","aria-hidden":"true"}),"فیلتر"]})]})]}),v&&(0,l.jsxs)("div",{className:"my-8 flex flex-col sm:flex-row gap-4",children:[(0,l.jsx)("input",{type:"text",value:h,onChange:e=>f(e.target.value),placeholder:"جستجو بر اساس کد محصول",className:"block w-full rounded-md border-0 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"}),(0,l.jsxs)("div",{className:"flex gap-2 sm:gap-4",children:[(0,l.jsx)("button",{onClick:()=>{r(1),g(h)},className:"flex-1 rounded-md bg-green-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-green-400",children:"جستجو"}),(0,l.jsx)("button",{onClick:()=>{f(""),g(""),r(1)},className:"flex-1 rounded-md bg-gray-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-gray-500",children:"ریست"})]})]}),(0,l.jsx)("div",{className:"-mx-4 mt-16 sm:-mx-0",children:y?(0,l.jsx)("div",{className:"text-center py-4",children:"در حال بارگذاری..."}):(0,l.jsxs)("table",{className:"min-w-full divide-y divide-gray-300",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{scope:"col",className:"py-3.5 pl-4 pr-3 text-right text-sm font-semibold text-gray-900 sm:pl-0",children:"نام محصول"}),(0,l.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-right text-sm font-semibold text-gray-900",children:"کد"}),(0,l.jsx)("th",{scope:"col",className:"hidden px-3 py-3.5 text-right text-sm font-semibold text-gray-900 lg:table-cell",children:"جنس ورق"}),(0,l.jsx)("th",{scope:"col",className:"hidden px-3 py-3.5 text-right text-sm font-semibold text-gray-900 lg:table-cell",children:"موجودی انبار"}),(0,l.jsx)("th",{scope:"col",className:"relative py-3.5 pl-3 pr-4 sm:pr-0",children:(0,l.jsx)("span",{className:"sr-only",children:"ویرایش"})})]})}),(0,l.jsx)("tbody",{className:"divide-y divide-gray-200 bg-white",children:e.map(e=>(0,l.jsxs)("tr",{children:[(0,l.jsxs)("td",{className:"w-full max-w-0 py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:w-auto sm:max-w-none sm:pl-0",children:[e.name,(0,l.jsxs)("dl",{className:"font-normal lg:hidden pt-2",children:[(0,l.jsx)("dt",{className:"text-gray-700 font-bold sr-only",children:"جنس ورق"}),(0,l.jsx)("dd",{className:"mt-1 truncate text-gray-500",children:e.category||"جنس ورق تعیین نشده"}),(0,l.jsx)("dt",{className:"text-gray-700 font-bold sr-only",children:"موجودی انبار"}),(0,l.jsxs)("dd",{className:"mt-1 truncate text-gray-500",children:[e.stock," عدد موجود"]})]})]}),(0,l.jsx)("td",{className:"px-3 py-4 text-sm text-gray-500",children:e.code}),(0,l.jsx)("td",{className:"hidden px-3 py-4 text-sm text-gray-500 lg:table-cell",children:e.category||"تعیین نشده"}),(0,l.jsx)("td",{className:"hidden px-3 py-4 text-sm text-gray-500 lg:table-cell",children:e.stock}),(0,l.jsx)("td",{className:"py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-0",children:(0,l.jsx)(n.default,{href:"/admin/products/edit?id=".concat(e.id),className:"text-indigo-600 hover:text-indigo-900",children:"ویرایش"})})]},e.id))})]})})]}),(0,l.jsxs)("nav",{className:"flex items-center justify-between border-t border-gray-200 px-4 sm:px-0 mt-16",children:[(0,l.jsx)("div",{className:"-mt-px flex w-0 flex-1",children:(0,l.jsxs)("button",{onClick:()=>C(s+1),disabled:s===N,className:"inline-flex items-center border-t-2 border-transparent pr-1 pt-4 text-sm font-medium text-gray-500 hover:border-gray-300 hover:text-gray-700 disabled:opacity-50",children:[(0,l.jsx)(c.Z,{className:"ml-3 h-5 w-5 text-gray-400","aria-hidden":"true"}),"صفحه بعد"]})}),(0,l.jsx)("div",{className:"hidden md:-mt-px md:flex",children:Array.from({length:N},(e,t)=>t+1).map(e=>(0,l.jsx)("button",{onClick:()=>C(e),className:"inline-flex items-center border-t-2 px-4 pt-4 text-sm font-medium ".concat(s===e?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"),children:e},e))}),(0,l.jsx)("div",{className:"-mt-px flex w-0 flex-1 justify-end",children:(0,l.jsxs)("button",{onClick:()=>C(s-1),disabled:1===s,className:"inline-flex items-center border-t-2 border-transparent pl-1 pt-4 text-sm font-medium text-gray-500 hover:border-gray-300 hover:text-gray-700 disabled:opacity-50",children:["صفحه قبل",(0,l.jsx)(o.Z,{className:"mr-3 h-5 w-5 text-gray-400","aria-hidden":"true"})]})})]})]})})]})]})}},9619:function(e,t,s){"use strict";s.d(t,{NF:function(){return l},QK:function(){return a}}),s(677).env.NEXT_PUBLIC_SHOW_LOGGER;let l="https://aqcfdwrgshzjnadidamy.supabase.co",a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFxY2Zkd3Jnc2h6am5hZGlkYW15Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzAwNDI2MTgsImV4cCI6MjA0NTYxODYxOH0.mZHOBtLvEFGRU25Cx_wR3dkv0OH2SrV6CfqkCe9G5UU"},619:function(e,t,s){"use strict";var l=s(3794);let a=l.forwardRef(function(e,t){let{title:s,titleId:a,...r}=e;return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},r),s?l.createElement("title",{id:a},s):null,l.createElement("path",{fillRule:"evenodd",d:"M18 10a.75.75 0 0 1-.75.75H4.66l2.1 1.95a.75.75 0 1 1-1.02 1.1l-3.5-3.25a.75.75 0 0 1 0-1.1l3.5-3.25a.75.75 0 1 1 1.02 1.1l-2.1 1.95h12.59A.75.75 0 0 1 18 10Z",clipRule:"evenodd"}))});t.Z=a},424:function(e,t,s){"use strict";var l=s(3794);let a=l.forwardRef(function(e,t){let{title:s,titleId:a,...r}=e;return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},r),s?l.createElement("title",{id:a},s):null,l.createElement("path",{fillRule:"evenodd",d:"M2 10a.75.75 0 0 1 .75-.75h12.59l-2.1-1.95a.75.75 0 1 1 1.02-1.1l3.5 3.25a.75.75 0 0 1 0 1.1l-3.5 3.25a.75.75 0 1 1-1.02-1.1l2.1-1.95H2.75A.75.75 0 0 1 2 10Z",clipRule:"evenodd"}))});t.Z=a},4600:function(e,t,s){"use strict";var l=s(3794);let a=l.forwardRef(function(e,t){let{title:s,titleId:a,...r}=e;return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},r),s?l.createElement("title",{id:a},s):null,l.createElement("path",{fillRule:"evenodd",d:"M2.628 1.601C5.028 1.206 7.49 1 10 1s4.973.206 7.372.601a.75.75 0 0 1 .628.74v2.288a2.25 2.25 0 0 1-.659 1.59l-4.682 4.683a2.25 2.25 0 0 0-.659 1.59v3.037c0 .684-.31 1.33-.844 1.757l-1.937 1.55A.75.75 0 0 1 8 18.25v-5.757a2.25 2.25 0 0 0-.659-1.591L2.659 6.22A2.25 2.25 0 0 1 2 4.629V2.34a.75.75 0 0 1 .628-.74Z",clipRule:"evenodd"}))});t.Z=a}},function(e){e.O(0,[547,533,355,102,744],function(){return e(e.s=989)}),_N_E=e.O()}]);